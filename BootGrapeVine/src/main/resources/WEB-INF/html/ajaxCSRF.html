<!DOCTYPE html>
<html>
<head>
<title>CSRF Protected JavaScript Page</title>
<meta name="description" content="This is the description for this page" />
<meta name="_csrf" content="${_csrf.token}" />
<!-- default header name is X-CSRF-TOKEN -->
<meta name="_csrf_header" content="${_csrf.headerName}" />
<!-- 		<sec:csrfMetaTags /> -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" language="javascript">
	// 			var token = $("meta[name='_csrf']").attr("content");
	// 			var header = $("meta[name='_csrf_header']").attr("content");
	// 			$(document).ajaxSend(function(e, xhr, options) {
	// 				xhr.setRequestHeader(header, token);
	// 			});

	$(document).ready(function() {

		console.log("In ready function");

		$.ajax({
			url : "http://localhost:8080/knockknock?first=first&last=last",
			type : "GET"
		}).then(function(data) {
			console.log("then funciton");
			$('.person-id').append(data.id);
			$('.person-firstName').append(data.firstName);
			$('.person-firstName').append(' ');
			$('.person-lastName').append(data.lastName);
		});
	});
</script>
</head>
<body>
	<a href="/home">Home</a>
	<a href="/greet">Public</a>
	<a href="/ajax">Ajax</a>
	<a href="/securityHome">Security</a>
	<br>
	<p class="person-firstName person-lastName">Hello </p>
	<p class="person-id">Person number:</p>
</body>
</html>